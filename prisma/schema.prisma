// This is your Prisma schema file,
// learn more about it in the docs: https://pris.ly/d/prisma-schema

generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}



//***************** Tabelas referentes a endere√ßo **********************************
model tbl_estado {
  id       Int      @id @default(autoincrement())
  nome     String   @db.VarChar(30)
  sigla    String   @db.VarChar(2)
  cidade   tbl_cidade[]

  @@unique([id])
}

model tbl_cidade {
  id                 Int      @id @default(autoincrement())
  nome               String   @db.VarChar(45)
  id_estado          Int
  endereco           tbl_endereco[]
  
  FK_Estado_Cidade   tbl_estado @relation(fields: [id_estado], references: [id])

  @@unique([id])
}

model tbl_endereco {
  id                 Int      @id @default(autoincrement())
  logradouro         String   @db.VarChar(45)
  bairro             String   @db.VarChar(45)
  cep                String   @db.VarChar(10)
  numero_residencia  String   @db.VarChar(10)
  complemento        String?  @db.VarChar(100)
  id_cidade          Int
  residencia         tbl_residencia_cliente[]
  diarista           tbl_diarista[]

  FK_Cidade_Endereco tbl_cidade @relation(fields: [id_cidade], references: [id])

  @@unique([id])
}

model tbl_tipo_residencia {
  id         Int             @id @default(autoincrement())
  nome       String          @db.VarChar(45) @unique             
  residencia tbl_residencia_cliente[]

  @@unique([id])
}

model tbl_residencia_cliente {
  id                   Int    @id @default(autoincrement())
  id_cliente           Int
  id_endereco          Int
  id_tipo_residencia   Int

  FK_Cliente_Residencia         tbl_cliente          @relation(fields: [id_cliente], references: [id])
  FK_Endereco_Residencia        tbl_endereco         @relation(fields: [id_endereco], references: [id])
  FK_TipoResidencia_Residencia  tbl_tipo_residencia  @relation(fields: [id_tipo_residencia], references: [id])

  @@unique([id])
}

model tbl_genero {
    id                   Int    @id @default(autoincrement())
    nome                 String @db.VarChar(30) @unique
    cliente              tbl_cliente[]
    diarista             tbl_diarista[]

    @@unique([id])
}


model tbl_cliente {
  id                   Int       @id @default(autoincrement())
  nome                 String    @db.VarChar(100)
  cpf                  String    @db.VarChar(20) @unique
  data_nascimento      DateTime  @db.Date
  biografia            String?   @db.Text
  foto_perfil          String?   @db.Text
  email                String    @db.VarChar(255) @unique
  senha                String    @db.VarChar(30)
  id_genero            Int
  residencia           tbl_residencia_cliente[]
  telefone             tbl_telefone_cliente[]

  FK_Genero_Cliente    tbl_genero @relation(fields: [id_genero], references: [id])

  @@unique([id])
}

model tbl_telefone_cliente {
  id                Int @id @default(autoincrement())
  numero_telefone   String @db.VarChar(15)
  ddd               String @db.VarChar(2)
  id_cliente        Int

  FK_Cliente_Telefone   tbl_cliente @relation(fields: [id_cliente], references: [id])


  @@unique([id])
}

model tbl_diarista{
  id Int @id @default(autoincrement())
  nome                 String    @db.VarChar(100)
  cpf                  String    @db.VarChar(20) @unique
  data_nascimento      DateTime  @db.Date
  biografia            String?   @db.Text
  foto_perfil          String?   @db.Text
  email                String    @db.VarChar(255) @unique
  senha                String    @db.VarChar(30)
  media_valor          String    @db.VarChar(45)
  id_endereco          Int
  id_genero            Int
  telefone             tbl_telefone_diarista[]

  FK_Endereco_Diarista tbl_endereco @relation(fields: [id_endereco], references: [id])
  FK_Genero_Diarista   tbl_genero   @relation(fields: [id_genero], references: [id])
}

model tbl_telefone_diarista {
  id                Int @id @default(autoincrement())
  numero_telefone   String @db.VarChar(15)
  ddd               String @db.VarChar(2)
  id_diarista       Int

  FK_Diarista_Telefone   tbl_diarista @relation(fields: [id_diarista], references: [id])

  @@unique([id])
}

